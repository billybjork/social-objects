/* ============================================================================
   IMAGE CAROUSEL COMPONENT - Tailwind Migration
   ============================================================================
   Uses @apply for base styles while maintaining existing class API.
   ============================================================================ */

.image-carousel {
  @apply relative w-full flex flex-col select-none;
  touch-action: pan-y;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

.image-carousel__image-wrapper {
  @apply relative w-full overflow-hidden bg-bg-tertiary rounded-md;
  cursor: inherit;
}

.image-carousel__image {
  @apply w-full h-full object-contain;
  -webkit-user-drag: none;
  -khtml-user-drag: none;
  -moz-user-drag: none;
  -o-user-drag: none;
  user-drag: none;
  -webkit-touch-callout: none;
}

/* Prevent default image drag behavior in compact mode */
.image-carousel--compact .image-carousel__image {
  @apply pointer-events-none;
}

/* ============================================================================
   Dot Indicators
   ============================================================================ */

.image-carousel__dots {
  @apply flex justify-center items-center gap-2 py-3 mt-2;
}

.image-carousel__dot {
  @apply p-1 bg-transparent border-0 cursor-pointer rounded-full;
  transition: transform var(--transition-fast);
}

.image-carousel__dot:hover {
  transform: scale(1.2);
}

.image-carousel__dot:focus-visible {
  @apply outline-2 outline-offset-2;
  outline-color: var(--color-primary);
}

.image-carousel__dot-inner {
  @apply block w-2 h-2 rounded-full bg-text-tertiary opacity-40;
  transition: all var(--transition-fast);
}

.image-carousel__dot--active .image-carousel__dot-inner {
  @apply bg-primary opacity-100;
  transform: scale(1.4);
}

.image-carousel__dot:hover .image-carousel__dot-inner {
  @apply bg-primary opacity-70;
}

/* ============================================================================
   Mode Variations
   ============================================================================ */

/* Compact mode - for product cards in grid */
.image-carousel--compact .image-carousel__image-wrapper {
  @apply flex gap-0 scrollbar-none;
  aspect-ratio: 1 / 1;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  -ms-overflow-style: none;
}

.image-carousel--compact .image-carousel__image {
  flex: 0 0 100%;
  scroll-snap-align: center;
  scroll-snap-stop: always;
}

/* Compact mode - dots overlaid on image */
.image-carousel--compact .image-carousel__dots {
  @apply absolute bottom-0 left-0 right-0 m-0 p-2;
  background: linear-gradient(
    to top,
    rgba(0, 0, 0, 0.3) 0%,
    rgba(0, 0, 0, 0.15) 50%,
    transparent 100%
  );
  border-radius: 0 0 var(--radius-md) var(--radius-md);
}

.image-carousel--compact .image-carousel__dot-inner {
  @apply opacity-100;
  background-color: rgba(255, 255, 255, 0.5);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.image-carousel--compact .image-carousel__dot--active .image-carousel__dot-inner {
  background-color: rgba(255, 255, 255, 1);
  transform: scale(1.4);
}

.image-carousel--compact .image-carousel__dot:hover .image-carousel__dot-inner {
  background-color: rgba(255, 255, 255, 0.8);
}

/* Full mode - for modal/detail views with adjacent image peek */
.image-carousel--full .image-carousel__image-wrapper {
  @apply flex gap-3 scrollbar-none;
  aspect-ratio: 4 / 3;
  max-height: 500px;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  -ms-overflow-style: none;
}

.image-carousel--full .image-carousel__image {
  flex: 0 0 70%;
  scroll-snap-align: center;
  scroll-snap-stop: always;
}

/* Add padding to center first and last images */
.image-carousel--full .image-carousel__image:first-child {
  margin-left: 15%;
}

.image-carousel--full .image-carousel__image:last-child {
  margin-right: 15%;
}

.image-carousel--full .image-carousel__dots {
  @apply absolute bottom-0 left-0 right-0 m-0 p-3;
  background: linear-gradient(
    to top,
    rgba(0, 0, 0, 0.3) 0%,
    rgba(0, 0, 0, 0.15) 50%,
    transparent 100%
  );
  border-radius: 0 0 var(--radius-md) var(--radius-md);
}

.image-carousel--full .image-carousel__dot-inner {
  @apply w-2.5 h-2.5 opacity-100;
  background-color: rgba(255, 255, 255, 0.5);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.image-carousel--full .image-carousel__dot--active .image-carousel__dot-inner {
  background-color: rgba(255, 255, 255, 1);
  transform: scale(1.4);
}

.image-carousel--full .image-carousel__dot:hover .image-carousel__dot-inner {
  background-color: rgba(255, 255, 255, 0.8);
}

/* ============================================================================
   Empty State
   ============================================================================ */

.image-carousel__empty {
  @apply flex items-center justify-center bg-surface rounded-md text-text-tertiary text-sm;
  aspect-ratio: 1 / 1;
}
